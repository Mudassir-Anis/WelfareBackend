
@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Change Password</h2>
<div class="row">
    <div class="col-lg-12">
        <div id="main_portlet" class="kt-portlet">
            <div class="kt-portlet__body">
                <form method="post" id="Banner_form" class="">
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary("", new { @class = "text-danger" })

                    <div class="kt-form__group row">

                        <div class="form-group col-lg-6 kt-form__group-sub">

                            <label for="UserName" class="form-control-label">User Name:</label>
                            <input type="text" disabled name="UserName" id="UserName" required class="form-control" value="admin" />

                        </div>
                        <div class="form-group col-lg-6 kt-form__group-sub">

                            <label for="OldPassword" class="form-control-label">Old Password:</label>
                            <input type="password" name="OldPassword" id="OldPassword" required class="form-control" value="" />

                        </div>

                    </div>


                    <div class="kt-form__group row">

                        <div class="form-group col-lg-6 kt-form__group-sub">

                            <label for="NewPassword" minlength="6" class="form-control-label">New Password:</label>
                            <input type="password" name="NewPassword" id="NewPassword" required class="form-control" value="" />

                        </div>
                        <div class="form-group col-lg-6 kt-form__group-sub">

                            <label for="ConfirmPassword" class="form-control-label">Confirm Password:</label>
                            <input type="password" minlength="6" data-rule-equalTo="#NewPassword" name="ConfirmPassword" id="ConfirmPassword" required class="form-control" value="" />

                        </div>

                    </div>

                </form>
                <div class="mb-1 mr-2 pull-right">
                    <button type="button" id="btn_Submit" class="btn btn-brand m-btn m-btn--gradient-from-primary m-btn--gradient-to-info  m-btn--icon  btn-sm pull-right">
                        <span class="ButtonContent">
                            @*<i class="fa fa-save"></i>*@
                            <span class="kt-hidden-mobile ButtonText">Change Password</span>
                        </span>


                    </button>

                </div>
            </div>
        </div>

    </div>
</div>

<script>
    //106 for save   107 error    108 update delete 109 1018
    $(document).ready(function () {

        $('#Banner_form').validate({
            ignore: ':hidden',
        });

        $('#btn_Submit').on('click', function () {
            //if($('#comp_agreetocondition').prop('checked')){}else{}
            debugger
            if ($('#Banner_form').valid()) {
                debugger
                var _FormData = new FormData(document.getElementById('Banner_form'));

                _FormData.set('IsActive', $('input[name="IsActive"]:checked').val());


                $('#btn_Submit').html(spanner);
                $.ajax({
                    type: 'POST',
                    url: '/Account/ChangePassword',
                    data: _FormData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        if (response.Code == 1) {

                            Utilities.HTML.Toastr.Show(153);
                            document.getElementById('Banner_form').reset();

                        }
                        else
                        {
                            Utilities.HTML.Toastr.Show(152);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        Utilities.HTML.Toastr.Show(107);
                    },
                    complete: function (response) {

                        $('#btn_Submit').text('Save');
                    }
                });
                //PostRequest('/admin/Banner/SavePressRelease', _FormData).done(function (response) {
                //    if (response.Code == 1)
                //    {
                //        document.getElementById('Banner_form').reset();
                //        $('.custom-file-label').text('Choose file');
                //        $('.custom-file-label').removeAttr('title');
                //        //Page.DataTable.destroy();
                //        GetData();

                //    }
                //    Utilities.HTML.Alert.Show(106);

                //}).fail(function () {
                //    Utilities.HTML.Toastr.Show(107);
                //}).always(function () {
                //    //Utilities.HTML.Loader.Hide();
                //});
            }
        });






    });
</script>

